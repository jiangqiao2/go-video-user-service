# 用户服务开发环境配置
server:
  host: "0.0.0.0"
  port: 8081
  mode: "debug"  # debug, release, test
  read_timeout: 60s
  write_timeout: 60s

database:
  host: "localhost"
  port: 3309  # user-db端口
  username: "root"
  password: "123456"
  database: "user_service"
  charset: "utf8mb4"
  parse_time: true
  loc: "Local"
  max_idle_conns: 10
  max_open_conns: 100
  conn_max_lifetime: 3600s

redis:
  host: "localhost"
  port: 6379
  password: ""
  db: 2  # 使用不同的db避免冲突
  pool_size: 10
  min_idle_conns: 5
  dial_timeout: 5s
  read_timeout: 3s
  write_timeout: 3s

jwt:
  secret: "user-service-secret-key-for-development"
  expire_time: 2h
  refresh_expire_time: 168h  # 7 days

log:
  level: "debug"  # debug, info, warn, error
  format: "json"  # json, text
  output: "stdout"  # stdout, file
  filename: "logs/user-service.log"
  max_size: 100  # MB
  max_backups: 7
  max_age: 30  # days
  compress: true

# 用户服务特定配置
user:
  password:
    min_length: 8
    require_uppercase: true
    require_lowercase: true
    require_numbers: true
    require_symbols: false
  session:
    timeout: 30m  # 会话超时时间
    max_concurrent: 5  # 最大并发会话数
  verification:
    email_expire: 24h  # 邮箱验证码过期时间
    sms_expire: 5m     # 短信验证码过期时间
    max_attempts: 5    # 最大验证尝试次数
  rate_limit:
    login_attempts: 5  # 登录尝试次数限制
    login_window: 15m  # 登录限制时间窗口
    register_limit: 3  # 注册限制次数
    register_window: 1h # 注册限制时间窗口

# 第三方服务配置
third_party:
  email:
    enabled: false
    smtp_host: "smtp.gmail.com"
    smtp_port: 587
    username: ""
    password: ""
    from_address: "noreply@example.com"
  sms:
    enabled: false
    provider: "aliyun"  # aliyun, tencent, twilio
    access_key: ""
    secret_key: ""
    sign_name: "用户服务"
    template_code: "SMS_123456789"

# 服务发现配置
service_discovery:
  enabled: false
  consul:
    address: "localhost:8500"
    service_name: "user-service"
    health_check_interval: "10s"
    
# 监控配置
monitoring:
  metrics:
    enabled: true
    path: "/metrics"
  tracing:
    enabled: false
    jaeger_endpoint: "http://localhost:14268/api/traces"

# 安全配置
security:
  cors:
    enabled: true
    allowed_origins:
      - "http://localhost:3000"
      - "http://localhost:8080"
    allowed_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "OPTIONS"
    allowed_headers:
      - "Content-Type"
      - "Authorization"
      - "X-Requested-With"
    max_age: 86400
  encryption:
    algorithm: "bcrypt"
    cost: 12